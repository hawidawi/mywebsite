
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Ø§ØªØ­Ø§Ø¯ Ø§Ù„Ø²ÙˆØ· Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ</title>
<style>
  :root{
    --brand:#0078D7; --bg:#f6f7fb; --text:#222; --card:#fff; --muted:#6b7280; --ok:#0ea5e9;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Tahoma,sans-serif;background:var(--bg);color:var(--text)}
  header{display:flex;align-items:center;gap:12px;padding:14px 18px;background:var(--brand);color:#fff;position:sticky;top:0;z-index:9}
  header .title{font-weight:700}
  header nav{margin-inline-start:auto;display:flex;gap:8px;flex-wrap:wrap}
  header a{color:#fff;text-decoration:none;background:#ffffff22;padding:6px 10px;border-radius:10px}
  .container{max-width:980px;margin:24px auto;padding:0 16px}
  .grid{display:grid;gap:16px}
  .grid-2{grid-template-columns:repeat(2,minmax(0,1fr))}
  @media(max-width:840px){.grid-2{grid-template-columns:1fr}}
  .card{background:var(--card);border-radius:14px;box-shadow:0 6px 24px #0001;padding:18px}
  .center{text-align:center}
  .btn{background:var(--brand);color:#fff;border:none;padding:12px 18px;border-radius:12px;font-weight:700;cursor:pointer}
  .btn:active{transform:translateY(1px)}
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:center}
  .small{color:var(--muted);font-size:13px}
  footer{padding:20px;text-align:center;color:#fff;background:#111;margin-top:40px}
  .tag{background:#e2e8f0;color:#111;padding:2px 8px;border-radius:999px;font-weight:700}
  kbd{background:#eee;border-radius:6px;padding:2px 6px;border:1px solid #ddd}

  /* Ø¯Ø±Ø¯Ø´Ø© */
  #chatCard{display:none}
  #chatList{list-style:none;margin:0;padding:0;max-height:320px;overflow:auto;border:1px solid #e5e7eb;border-radius:10px}
  #chatList li{padding:8px 10px;border-bottom:1px dashed #eee}
  #chatList li b{color:#2563eb}
  #chatForm{display:flex;gap:8px;margin-top:10px}
  #chatForm input, #chatForm button{padding:10px;border-radius:10px;border:1px solid #ddd}
  #chatForm input{flex:1}
  .note{background:#fff6;border:1px dashed #ddd;padding:10px;border-radius:10px}

  /* ÙƒÙ†ÙÙØªÙ‘ÙŠ Ø¨Ø³ÙŠØ· */
  canvas#boom{position:fixed;inset:0;pointer-events:none}
</style>
</head>
<body>
<header>
  <div class="title">Ø§ØªØ­Ø§Ø¯ Ø§Ù„Ø²ÙˆØ· Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ</div>
  <nav>
    <a href="#home">Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a>
    <a href="#chat">Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</a>
  </nav>
</header>

<canvas id="boom"></canvas>

<main class="container" id="home">
  <div class="card center">
    <h1>Ø²Ø± Ø§Ù„Ø²ÙˆØ· Ø§Ù„ÙÙˆØ±ÙŠ</h1>
    <p class="small">Ø§Ø±ÙØ¹ Ù…Ù„ÙÙŠ Ø§Ù„ØµÙˆØª Ø¨Ù€Ø§Ù„Ø£Ø³Ù…Ø§Ø¡: <code>assets/sounds/zoot1.mp3</code> Ùˆ <code>assets/sounds/zoot2.mp3</code>.</p>
    <div class="row" style="margin:14px 0">
      <button class="btn" id="btn1">Ø²Ø± 1</button>
      <button class="btn" id="btn2">Ø²Ø± 2</button>
    </div>
    <p class="small">Ø§Ø®ØªØµØ§Ø±Ø§Øª: <kbd>1</kbd> ÙŠØ´ØºÙ„ Ø²Ø± 1 â€” <kbd>2</kbd> ÙŠØ´ØºÙ„ Ø²Ø± 2</p>
  </div>

  <div class="grid grid-2">
    <div class="card">
      <h2>ÙˆØ´ ÙŠØ¹Ù†ÙŠ Ø²ÙˆØ·ØŸ</h2>
      <p>ÙÙ† Ø§Ù„Ø±Ø¯ÙˆØ¯ Ø§Ù„ÙÙˆØ±ÙŠØ© Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„ØºØ±ÙŠØ¨Ø©. Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©:
        <span class="tag">Ù‡Ø§ØŸ</span> Ø«Ù… <span class="tag">Ø²ÙˆØ·</span>â€¦ ÙˆØ§Ù„Ø¨Ø§Ù‚ÙŠ Ø¶Ø­Ùƒ ğŸ˜‚</p>
    </div>

    <!-- Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© -->
    <div class="card" id="chatCard">
      <h2 id="chat">ØºØ±ÙØ© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø²ÙˆØ·ÙŠØ©</h2>
      <div class="small" id="chatHint">Ø£Ø¯Ø®Ù„ Ù„Ù‚Ø¨Ùƒ ÙˆØ¨Ø§Ø¯Ø± Ø¨Ø§Ù„Ø²ÙˆØ·!</div>
      <ul id="chatList"></ul>
      <form id="chatForm" onsubmit="return false;">
        <input id="nick" placeholder="Ø§Ù„Ù„Ù‚Ø¨ (Ù…Ø±Ù‘Ø© ÙˆØ§Ø­Ø¯Ø©)"/>
        <input id="msg" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©â€¦"/>
        <button class="btn" id="send">Ø¥Ø±Ø³Ø§Ù„</button>
      </form>
    </div>

    <!-- ØªØ¸Ù‡Ø± Ø¨Ø¯Ù„ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø¥Ø°Ø§ Ù…Ø§ ØªÙ… Ø¶Ø¨Ø· Firebase -->
    <div class="card note" id="chatOff" style="display:none">
      <b>Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ù…ØªÙˆÙ‚ÙØ© Ù…Ø¤Ù‚ØªÙ‹Ø§.</b>
      <div class="small">
        Ù„ÙØ¹Ù„Ù‡Ø§: Ø£Ù†Ø´Ø¦ Ù…Ø´Ø±ÙˆØ¹ Firebase â†’ ÙØ¹Ù‘Ù„ Realtime Database â†’ Ø§Ù†Ø³Ø® Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª (config) ÙˆØ¶Ø¹Ù‡Ø§ ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ ØªØ­Øª
        <code>// Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase</code> Ø«Ù… Ø§Ø­ÙØ¸. Ø¨Ø¹Ø¯ Ø¯Ù‚ÙŠÙ‚Ø© Ø­Ø¯Ù‘Ø« Ø§Ù„ØµÙØ­Ø© <kbd>Ctrl</kbd>+<kbd>F5</kbd>.
      </div>
    </div>
  </div>
</main>

<footer>UZW Â© 2025 â€” ØµÙ†Ø¹ Ø¨Ø­Ø¨ ÙˆØ³Ø¹Ø§Ø¯Ø© Ø²ÙˆØ·ÙŠØ©</footer>

<script>
/* ========= Ø§Ù„Ø£ØµÙˆØ§Øª ========= */
const s1 = new Audio('assets/sounds/zoot1.mp3');
const s2 = new Audio('assets/sounds/zoot2.mp3');
s1.preload = 'auto'; s2.preload = 'auto';

function playZoot(which=1){
  try{
    (which===1? s1: s2).currentTime = 0;
    (which===1? s1: s2).play().catch(()=>{});
  }catch(e){}
  confettiBurst(innerWidth*0.5, innerHeight*0.4);
}

document.getElementById('btn1').onclick = ()=> playZoot(1);
document.getElementById('btn2').onclick = ()=> playZoot(2);
window.addEventListener('keydown', (e)=>{
  if(e.key==='1'){ playZoot(1); }
  if(e.key==='2'){ playZoot(2); }
});

/* ========= ÙƒÙ†ÙÙØªÙ‘ÙŠ Ø¨Ø³ÙŠØ· ========= */
const boom = document.getElementById('boom');
const ctx = boom.getContext('2d');
function resize(){ boom.width = innerWidth; boom.height = innerHeight; }
addEventListener('resize', resize); resize();
let parts = [];
function confettiBurst(x,y){
  for(let i=0;i<120;i++){
    parts.push({
      x, y, r: 3+Math.random()*3,
      vx:(Math.random()-0.5)*6, vy:(Math.random()-1.2)*7,
      a:1, c:`hsl(${Math.random()*360},90%,60%)`
    });
  }
}
function tick(){
  ctx.clearRect(0,0,boom.width,boom.height);
  parts.forEach(p=>{
    p.vy += 0.12; p.x += p.vx; p.y += p.vy; p.a -= 0.012;
    ctx.globalAlpha = Math.max(p.a,0);
    ctx.beginPath(); ctx.fillStyle = p.c; ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fill();
  });
  parts = parts.filter(p=>p.a>0 && p.y<boom.height+50);
  requestAnimationFrame(tick);
}
tick();

/* ========= Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© (Firebase) ========= */
/* Ø¶Ø¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Firebase Ù‡Ù†Ø§ (Ø§Ø³ØªØ¨Ø¯Ù„ Ø§Ù„Ù‚ÙŠÙ… Ø£Ø¯Ù†Ø§Ù‡ Ø¨Ù‚ÙŠÙ… Ù…Ø´Ø±ÙˆØ¹Ùƒ) */
const FIREBASE_CONFIG = {
  apiKey: "",               // â† Ø§ÙƒØªØ¨ Ù‚ÙŠÙ…ØªÙƒ
  authDomain: "",           // â† Ø§ÙƒØªØ¨ Ù‚ÙŠÙ…ØªÙƒ
  databaseURL: "",          // â† Ù…Ù‡Ù… Ù„Ø¯Ø±Ø¯Ø´Ø© Realtime
  projectId: "",            // â† Ø§ÙƒØªØ¨ Ù‚ÙŠÙ…ØªÙƒ
  storageBucket: "",        // Ø§Ø®ØªÙŠØ§Ø±ÙŠ
  messagingSenderId: "",    // Ø§Ø®ØªÙŠØ§Ø±ÙŠ
  appId: ""                 // â† Ø§ÙƒØªØ¨ Ù‚ÙŠÙ…ØªÙƒ
};

/* Ø¥Ù† Ù…Ø§ ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªØŒ Ù†Ø®ÙÙŠ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© ÙˆÙ†Ø¸Ù‡Ø± Ù…Ù„Ø§Ø­Ø¸Ø© */
const chatCard = document.getElementById('chatCard');
const chatOff  = document.getElementById('chatOff');

function hasFirebaseConfig(cfg){
  return cfg && cfg.apiKey && cfg.databaseURL && cfg.projectId && cfg.appId;
}

if(!hasFirebaseConfig(FIREBASE_CONFIG)){
  chatOff.style.display='block';
} else {
  // Ù†Ø­Ù…Ù„ SDKs Ù…Ù† CDN (Ù†Ø³Ø® Ø®ÙÙŠÙØ© Ù…Ù†Ø§Ø³Ø¨Ø© Ù„ØµÙØ­Ø© Ø«Ø§Ø¨ØªØ©)
  const s = document.createElement('script');
  s.type = 'module';
  s.textContent = `
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getDatabase, ref, push, onChildAdded, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

    const app = initializeApp(${JSON.stringify(FIREBASE_CONFIG)});
    const db  = getDatabase(app);

    const list  = document.getElementById('chatList');
    const nickI = document.getElementById('nick');
    const msgI  = document.getElementById('msg');
    const sendB = document.getElementById('send');

    // Ø­ÙØ¸ Ø§Ù„Ù„Ù‚Ø¨ Ù…Ø­Ù„ÙŠÙ‹Ø§
    nickI.value = localStorage.getItem('uzw_nick') || "";

    function addMsg(el){
      const li = document.createElement('li');
      li.innerHTML = "<b>"+ (el.nick||"Ù…Ø¬Ù‡ÙˆÙ„") +"</b>: "+ (el.text||"");
      list.appendChild(li);
      list.scrollTop = list.scrollHeight;
    }

    // Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
    const roomRef = ref(db, "rooms/default");
    onChildAdded(roomRef, snap => {
      const v = snap.val(); addMsg(v||{});
    });

    sendB.onclick = ()=>{
      const nick = (nickI.value||"").trim() || "Ù…Ø¬Ù‡ÙˆÙ„";
      const text = (msgI.value||"").trim();
      if(!text) return;
      localStorage.setItem('uzw_nick', nick);
      push(roomRef, {nick, text, ts: serverTimestamp()});
      msgI.value=""; msgI.focus();
      // Ø·Ù†Ù‘Ø© ØµØºÙŠØ±Ø©
      try { new Audio('assets/sounds/zoot1.mp3').play().catch(()=>{}); }catch(e){}
    };

    document.getElementById('chatCard').style.display='block';
    document.getElementById('chatOff').style.display='none';
  `;
  document.body.appendChild(s);
}
</script>
</body>
</html>
